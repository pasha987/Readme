Slip-6
Q1-
#include <stdio.h>
#include <stdlib.h>
#include <dirent.h>
#include <sys/stat.h>
#include <time.h>
#include <string.h>

int main() {
    DIR *dp;
    struct dirent *entry;
    struct stat filestat;
    int month;

    printf("Enter month number (1-12): ");
    scanf("%d", &month);

    dp = opendir(".");
    if (dp == NULL) {
        printf("Cannot open current directory\n");
        exit(1);
    }

    printf("\nFiles created in month %d:\n", month);

    while ((entry = readdir(dp)) != NULL) {
        if (stat(entry->d_name, &filestat) == 0) {
            struct tm *timeinfo = localtime(&filestat.st_mtime);
            if (timeinfo->tm_mon + 1 == month) {
                printf("%s\n", entry->d_name);
            }
        }
    }

    closedir(dp);
    return 0;
}
Q2-
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <sys/resource.h>
#include <unistd.h>

int main() {
    int n, i, pid;
    struct rusage usage;
    long total_user_sec = 0, total_user_usec = 0;
    long total_sys_sec = 0, total_sys_usec = 0;

    printf("Enter number of child processes: ");
    scanf("%d", &n);

    for (i = 0; i < n; i++) {
        pid = fork();

        if (pid < 0) {
            printf("Fork failed!\n");
            exit(1);
        }

        if (pid == 0) {
            // Child process does some work
            for (long j = 0; j < 10000000; j++);  // dummy workload
            exit(0);
        }
    }

    // Parent waits for all children and accumulates usage time
    for (i = 0; i < n; i++) {
        wait4(-1, NULL, 0, &usage);

        total_user_sec  += usage.ru_utime.tv_sec;
        total_user_usec += usage.ru_utime.tv_usec;

        total_sys_sec   += usage.ru_stime.tv_sec;
        total_sys_usec  += usage.ru_stime.tv_usec;
    }

    // Normalize microseconds
    total_user_sec += total_user_usec / 1000000;
    total_user_usec %= 1000000;

    total_sys_sec += total_sys_usec / 1000000;
    total_sys_usec %= 1000000;

    printf("\nTotal User CPU Time   : %ld.%06lds seconds\n",
            total_user_sec, total_user_usec);

    printf("Total System CPU Time : %ld.%06lds seconds\n",
            total_sys_sec, total_sys_usec);

    return 0;
}
